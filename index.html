<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>缘分指数测评</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #ffb7e4 0%, #c68eff 50%, #9a7bff 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            color: #5a3a7a;
        }

        .app-container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(154, 123, 255, 0.3);
            overflow: hidden;
            padding: 30px;
            position: relative;
        }

        /* 心形装饰 */
        .heart-decoration {
            position: absolute;
            opacity: 0.1;
            z-index: 0;
        }

        .heart-decoration:nth-child(1) {
            top: 10%;
            left: 5%;
            font-size: 40px;
            color: #ff6b9d;
        }

        .heart-decoration:nth-child(2) {
            bottom: 15%;
            right: 8%;
            font-size: 60px;
            color: #c68eff;
        }

        /* 通用页面样式 */
        .page {
            display: none;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 1;
        }

        .page.active {
            display: flex;
            animation: fadeIn 0.8s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 标题样式 */
        h1 {
            font-size: 2.8rem;
            color: #9a4dff;
            margin-bottom: 15px;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(154, 77, 255, 0.2);
        }

        h2 {
            font-size: 1.8rem;
            color: #7a3ab9;
            margin-bottom: 20px;
            text-align: center;
        }

        .subtitle {
            font-size: 1.4rem;
            color: #a56eff;
            margin-bottom: 30px;
            text-align: center;
            line-height: 1.5;
        }

        /* 引导页样式 */
        #landing-page {
            text-align: center;
            padding: 20px 0;
        }

        .heart-illustration {
            width: 300px;
            height: 270px;
            margin: 30px auto;
            position: relative;
            background: linear-gradient(45deg, #ff9ec0, #ff7eb3);
            -webkit-clip-path: polygon(50% 15%, 61% 6%, 75% 3%, 88% 6%, 96% 15%, 100% 27%, 99% 44%, 94% 58%, 85% 70%, 75% 79%, 50% 100%, 25% 79%, 15% 70%, 6% 58%, 1% 44%, 0% 27%, 4% 15%, 12% 6%, 25% 3%, 39% 6%);
            clip-path: polygon(50% 15%, 61% 6%, 75% 3%, 88% 6%, 96% 15%, 100% 27%, 99% 44%, 94% 58%, 85% 70%, 75% 79%, 50% 100%, 25% 79%, 15% 70%, 6% 58%, 1% 44%, 0% 27%, 4% 15%, 12% 6%, 25% 3%, 39% 6%);
            box-shadow: 0 10px 25px rgba(255, 126, 179, 0.4);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .heart-figures {
            width: 180px;
            height: 120px;
            position: relative;
        }

        .figure {
            position: absolute;
            width: 60px;
            height: 80px;
            background-color: white;
            border-radius: 50% 50% 40% 40%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .figure-1 {
            left: 0;
            top: 20px;
            transform: rotate(-5deg);
        }

        .figure-2 {
            right: 0;
            top: 20px;
            transform: rotate(5deg);
        }

        .figure::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: white;
            border-radius: 50%;
            top: -10px;
            left: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* 按钮样式 */
        .btn {
            background: linear-gradient(45deg, #ff7eb3, #9a4dff);
            color: white;
            border: none;
            padding: 18px 40px;
            font-size: 1.4rem;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(154, 77, 255, 0.3);
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(154, 77, 255, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-small {
            padding: 12px 25px;
            font-size: 1.1rem;
        }

        .btn-premium {
            background: linear-gradient(45deg, #ffd166, #ff9a3c);
            color: #7a3a00;
            font-size: 1.5rem;
            padding: 22px 50px;
            margin-top: 40px;
        }

        /* 测试页样式 */
        .progress-container {
            width: 100%;
            background-color: #f0e6ff;
            height: 12px;
            border-radius: 6px;
            margin-bottom: 40px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #ff7eb3, #9a4dff);
            width: 0%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }

        .question-number {
            font-size: 1.2rem;
            color: #9a4dff;
            margin-bottom: 10px;
            align-self: flex-start;
        }

        .question-text {
            font-size: 1.8rem;
            margin-bottom: 40px;
            color: #5a3a7a;
            line-height: 1.4;
            width: 100%;
        }

        .options-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .option {
            background-color: #f9f4ff;
            border: 2px solid #e6d9ff;
            border-radius: 15px;
            padding: 22px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .option:hover {
            background-color: #f0e6ff;
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(154, 77, 255, 0.1);
        }

        .option.selected {
            background-color: #e6d9ff;
            border-color: #9a4dff;
            box-shadow: 0 5px 15px rgba(154, 77, 255, 0.2);
        }

        .option-letter {
            display: inline-block;
            width: 36px;
            height: 36px;
            background-color: #ff7eb3;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 36px;
            margin-right: 15px;
            font-weight: bold;
        }

        /* 结果页样式 */
        .result-percentage {
            font-size: 5rem;
            color: #ff4d8d;
            margin: 20px 0;
            text-shadow: 3px 3px 0px rgba(255, 77, 141, 0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .result-message {
            font-size: 1.6rem;
            color: #7a3ab9;
            margin-bottom: 40px;
            text-align: center;
        }

        .dimension-analysis {
            width: 100%;
            margin-top: 30px;
        }

        .dimension {
            background-color: #f9f4ff;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 8px solid;
            box-shadow: 0 5px 15px rgba(154, 77, 255, 0.1);
        }

        .dimension:nth-child(1) {
            border-left-color: #ff7eb3;
        }

        .dimension:nth-child(2) {
            border-left-color: #9a4dff;
        }

        .dimension:nth-child(3) {
            border-left-color: #7a3ab9;
        }

        .dimension-title {
            font-size: 1.4rem;
            color: #5a3a7a;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .dimension-title i {
            margin-right: 10px;
            font-size: 1.6rem;
        }

        .dimension-text {
            font-size: 1.2rem;
            color: #7a5a9a;
            line-height: 1.5;
        }

        /* 付费成功页样式 */
        .success-icon {
            font-size: 6rem;
            color: #ffd166;
            margin: 30px 0;
            animation: bounce 1s ease infinite alternate;
        }

        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-20px); }
        }

        .download-link {
            display: inline-block;
            background: linear-gradient(45deg, #ff7eb3, #9a4dff);
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-size: 1.2rem;
            margin-top: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(154, 77, 255, 0.3);
        }

        .download-link:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(154, 77, 255, 0.4);
        }

        /* 导航按钮 */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 40px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .app-container {
                padding: 20px;
                border-radius: 20px;
            }

            h1 {
                font-size: 2.2rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            .subtitle {
                font-size: 1.2rem;
            }

            .heart-illustration {
                width: 250px;
                height: 225px;
            }

            .result-percentage {
                font-size: 4rem;
            }

            .btn {
                padding: 15px 30px;
                font-size: 1.2rem;
            }

            .btn-premium {
                padding: 20px 40px;
                font-size: 1.3rem;
            }

            .question-text {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .app-container {
                padding: 15px;
            }

            h1 {
                font-size: 1.8rem;
            }

            .subtitle {
                font-size: 1.1rem;
            }

            .heart-illustration {
                width: 200px;
                height: 180px;
                margin: 20px auto;
            }

            .heart-figures {
                width: 140px;
                height: 90px;
            }

            .figure {
                width: 45px;
                height: 60px;
            }

            .figure::after {
                width: 15px;
                height: 15px;
                left: 15px;
            }

            .option {
                padding: 18px;
                font-size: 1.1rem;
            }
        }
    </style>
    <!-- 添加 Font Awesome 图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 心形装饰 -->
    <div class="heart-decoration"><i class="fas fa-heart"></i></div>
    <div class="heart-decoration"><i class="fas fa-heart"></i></div>
    
    <!-- 主应用容器 -->
    <div class="app-container">
        <!-- 引导页 -->
        <div id="landing-page" class="page active">
            <h1>测测你们的缘分有多深？</h1>
            <div class="subtitle">10道题，解锁你们的专属恋爱报告</div>
            
            <!-- 心形图案 -->
            <div class="heart-illustration">
                <div class="heart-figures">
                    <div class="figure figure-1"></div>
                    <div class="figure figure-2"></div>
                </div>
            </div>
            
            <button id="start-btn" class="btn">开始测试</button>
        </div>
        
        <!-- 测试页 -->
        <div id="test-page" class="page">
            <div class="progress-container">
                <div id="progress-bar" class="progress-bar"></div>
            </div>
            
            <div id="question-number" class="question-number">第 1 题 / 共 10 题</div>
            <div id="question-text" class="question-text">当你们发生争执时，你通常会？</div>
            
            <div id="options-container" class="options-container">
                <!-- 选项会由JavaScript动态生成 -->
            </div>
            
            <div class="nav-buttons">
                <button id="prev-btn" class="btn btn-small" style="visibility: hidden;">
                    <i class="fas fa-arrow-left"></i> 上一题
                </button>
                <button id="next-btn" class="btn btn-small">下一题 <i class="fas fa-arrow-right"></i></button>
            </div>
        </div>
        
        <!-- 结果页 -->
        <div id="result-page" class="page">
            <h2>你们的缘分指数是：</h2>
            <div id="result-percentage" class="result-percentage">85%</div>
            
            <div class="dimension-analysis">
                <div class="dimension">
                    <div class="dimension-title"><i class="fas fa-comments"></i> 沟通协调</div>
                    <div id="communication-text" class="dimension-text">一个快人快语，一个三思后行，你们的对话就像说唱遇上了散文诗...</div>
                </div>
                
                <div class="dimension">
                    <div class="dimension-title"><i class="fas fa-heart"></i> 情感表达</div>
                    <div id="expression-text" class="dimension-text">一个爱要大声说出口，一个爱藏在小动作里，你们的雷达需要稍微调频一下...</div>
                </div>
                
                <div class="dimension">
                    <div class="dimension-title"><i class="fas fa-home"></i> 生活默契</div>
                    <div id="life-text" class="dimension-text">在"吃啥"这个问题上，你们可能还需要一场漫长的博弈...</div>
                </div>
            </div>
            
            <button id="premium-btn" class="btn btn-premium">
                <i class="fas fa-gift"></i> 解锁12页《终极相处指南》 (仅需0.99元)
            </button>
        </div>
        
        <!-- 付费成功页 -->
        <div id="payment-page" class="page">
            <div class="success-icon"><i class="fas fa-check-circle"></i></div>
            <h1>感谢您的购买！</h1>
            <div class="subtitle">您的《终极相处指南》PDF已生成，正在为您自动下载...</div>
            <p>如果下载未开始，请点击<a href="#" class="download-link" id="download-link">此链接</a>。</p>
            
            <button id="restart-btn" class="btn" style="margin-top: 40px;">
                <i class="fas fa-redo"></i> 重新开始测试
            </button>
        </div>
    </div>

    <script>
        // 问题数据
        const questions = [
            {
                question: "当你们发生争执时，你通常会？",
                options: [
                    { text: "主动沟通，希望立刻解决", type: "沟通型", value: 8 },
                    { text: "需要冷静一下，稍后再谈", type: "冷静型", value: 5 },
                    { text: "有点逃避，希望对方先让步", type: "回避型", value: 3 }
                ]
            },
            {
                question: "你更喜欢如何度过周末？",
                options: [
                    { text: "一起尝试新鲜的户外活动", type: "冒险型", value: 7 },
                    { text: "宅在家里看电影，享受二人世界", type: "居家型", value: 6 },
                    { text: "各自有自己的空间，做自己喜欢的事", type: "独立型", value: 4 }
                ]
            },
            {
                question: "你觉得理想的恋爱关系中最重要的是？",
                options: [
                    { text: "彼此信任，互相尊重", type: "信任型", value: 9 },
                    { text: "有共同的兴趣爱好", type: "兴趣型", value: 7 },
                    { text: "保持新鲜感和激情", type: "激情型", value: 5 }
                ]
            },
            {
                question: "当对方心情不好时，你会？",
                options: [
                    { text: "主动安慰，想办法让对方开心", type: "安慰型", value: 8 },
                    { text: "安静陪伴，等待对方主动倾诉", type: "陪伴型", value: 6 },
                    { text: "给对方一些独处的时间", type: "空间型", value: 4 }
                ]
            },
            {
                question: "你对未来的规划中，对方占据什么位置？",
                options: [
                    { text: "是未来规划的核心部分", type: "核心型", value: 9 },
                    { text: "重要的一部分，但不是全部", type: "重要型", value: 7 },
                    { text: "顺其自然，不做过多规划", type: "自然型", value: 4 }
                ]
            },
            {
                question: "你表达爱意的主要方式是？",
                options: [
                    { text: "直接说'我爱你'或赞美对方", type: "直白型", value: 8 },
                    { text: "通过行动和细节照顾对方", type: "行动型", value: 7 },
                    { text: "准备礼物或惊喜", type: "礼物型", value: 6 }
                ]
            },
            {
                question: "当你们有不同意见时，你通常？",
                options: [
                    { text: "努力说服对方接受自己的观点", type: "说服型", value: 4 },
                    { text: "寻找双方都能接受的折中方案", type: "折中型", value: 8 },
                    { text: "尊重差异，各自保留意见", type: "尊重型", value: 6 }
                ]
            },
            {
                question: "你如何看待个人空间和隐私？",
                options: [
                    { text: "恋爱中也需要有个人空间", type: "空间型", value: 7 },
                    { text: "彼此透明，没有太多秘密", type: "透明型", value: 5 },
                    { text: "视情况而定，需要平衡", type: "平衡型", value: 8 }
                ]
            },
            {
                question: "你认为理想的相处频率是？",
                options: [
                    { text: "每天见面或联系", type: "高频型", value: 6 },
                    { text: "每周见面几次，保持适度距离", type: "适度型", value: 7 },
                    { text: "彼此独立，不需要刻意安排", type: "独立型", value: 5 }
                ]
            },
            {
                question: "你相信命中注定的缘分吗？",
                options: [
                    { text: "相信，一切都是最好的安排", type: "宿命型", value: 9 },
                    { text: "更相信需要双方努力经营", type: "经营型", value: 8 },
                    { text: "不太确定，随缘就好", type: "随缘型", value: 4 }
                ]
            }
        ];

        // 分析文本库
        const communicationTexts = [
            "一个快人快语，一个三思后行，你们的对话就像说唱遇上了散文诗...",
            "你们都善于倾听，沟通起来如行云流水，很少产生误解。",
            "一个喜欢直接表达，一个习惯暗示，可能需要更明确的信号灯。",
            "你们的沟通风格高度契合，总能get到对方的点，默契十足。"
        ];
        
        const expressionTexts = [
            "一个爱要大声说出口，一个爱藏在小动作里，你们的雷达需要稍微调频一下...",
            "你们的情感表达都很直接热烈，像夏日阳光一样温暖耀眼。",
            "你们表达爱的方式都很务实，行动胜过千言万语。",
            "一个浪漫外放，一个含蓄内敛，形成了美妙的互补。"
        ];
        
        const lifeTexts = [
            "在'吃啥'这个问题上，你们可能还需要一场漫长的博弈...",
            "你们的生活节奏和喜好高度同步，简直是天作之合。",
            "一个喜欢计划，一个随性而为，正好形成了完美平衡。",
            "你们的生活习惯有些不同，但愿意为对方调整，这是爱的表现。"
        ];

        // 应用状态
        let currentQuestion = 0;
        let userAnswers = Array(questions.length).fill(null);
        let totalScore = 0;
        const maxScore = questions.length * 9; // 每道题最高9分

        // DOM 元素
        const landingPage = document.getElementById('landing-page');
        const testPage = document.getElementById('test-page');
        const resultPage = document.getElementById('result-page');
        const paymentPage = document.getElementById('payment-page');
        
        const startBtn = document.getElementById('start-btn');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const premiumBtn = document.getElementById('premium-btn');
        const restartBtn = document.getElementById('restart-btn');
        const downloadLink = document.getElementById('download-link');
        
        const progressBar = document.getElementById('progress-bar');
        const questionNumber = document.getElementById('question-number');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        
        const resultPercentage = document.getElementById('result-percentage');
        const communicationText = document.getElementById('communication-text');
        const expressionText = document.getElementById('expression-text');
        const lifeText = document.getElementById('life-text');

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 绑定事件
            startBtn.addEventListener('click', startTest);
            nextBtn.addEventListener('click', goToNextQuestion);
            prevBtn.addEventListener('click', goToPrevQuestion);
            premiumBtn.addEventListener('click', showPaymentPage);
            restartBtn.addEventListener('click', restartTest);
            downloadLink.addEventListener('click', function(e) {
                e.preventDefault();
                alert("由于是演示版本，PDF文件未实际生成。在实际应用中，这里会触发PDF下载。");
            });
            
            // 生成第一题
            updateQuestion();
        });

        // 开始测试
        function startTest() {
            landingPage.classList.remove('active');
            testPage.classList.add('active');
        }

        // 更新问题
        function updateQuestion() {
            const question = questions[currentQuestion];
            
            // 更新进度条
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            // 更新题号
            questionNumber.textContent = `第 ${currentQuestion + 1} 题 / 共 ${questions.length} 题`;
            
            // 更新问题文本
            questionText.textContent = question.question;
            
            // 清空选项容器
            optionsContainer.innerHTML = '';
            
            // 生成选项
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                if (userAnswers[currentQuestion] === index) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}</span>
                    ${option.text}
                `;
                
                optionElement.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            // 更新导航按钮
            prevBtn.style.visibility = currentQuestion === 0 ? 'hidden' : 'visible';
            nextBtn.textContent = currentQuestion === questions.length - 1 ? '查看结果' : '下一题';
            nextBtn.innerHTML = currentQuestion === questions.length - 1 ? 
                '查看结果 <i class="fas fa-chart-line"></i>' : 
                '下一题 <i class="fas fa-arrow-right"></i>';
        }

        // 选择选项
        function selectOption(index) {
            // 移除之前的选择
            document.querySelectorAll('.option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // 添加当前选择
            document.querySelectorAll('.option')[index].classList.add('selected');
            
            // 保存答案
            userAnswers[currentQuestion] = index;
        }

        // 下一题
        function goToNextQuestion() {
            // 确保已选择答案
            if (userAnswers[currentQuestion] === null) {
                alert('请先选择一个答案再继续！');
                return;
            }
            
            // 如果是最后一题，显示结果
            if (currentQuestion === questions.length - 1) {
                showResults();
                return;
            }
            
            // 否则，转到下一题
            currentQuestion++;
            updateQuestion();
        }

        // 上一题
        function goToPrevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                updateQuestion();
            }
        }

        // 显示结果
        function showResults() {
            // 计算总分
            totalScore = 0;
            userAnswers.forEach((answerIndex, questionIndex) => {
                if (answerIndex !== null) {
                    totalScore += questions[questionIndex].options[answerIndex].value;
                }
            });
            
            // 计算百分比
            const percentage = Math.round((totalScore / maxScore) * 100);
            resultPercentage.textContent = `${percentage}%`;
            
            // 根据分数选择分析文本
            let commIndex, exprIndex, lifeIndex;
            
            if (percentage >= 80) {
                commIndex = 3;
                exprIndex = 1;
                lifeIndex = 1;
            } else if (percentage >= 60) {
                commIndex = 1;
                exprIndex = 3;
                lifeIndex = 3;
            } else if (percentage >= 40) {
                commIndex = 2;
                exprIndex = 0;
                lifeIndex = 2;
            } else {
                commIndex = 0;
                exprIndex = 2;
                lifeIndex = 0;
            }
            
            communicationText.textContent = communicationTexts[commIndex];
            expressionText.textContent = expressionTexts[exprIndex];
            lifeText.textContent = lifeTexts[lifeIndex];
            
            // 显示结果页
            testPage.classList.remove('active');
            resultPage.classList.add('active');
        }

        // 显示付费页面
        function showPaymentPage() {
            resultPage.classList.remove('active');
            paymentPage.classList.add('active');
            
            // 模拟下载
            setTimeout(() => {
                alert("由于是演示版本，PDF文件未实际生成。在实际应用中，这里会触发PDF下载。");
            }, 1500);
        }

        // 重新开始测试
        function restartTest() {
            // 重置状态
            currentQuestion = 0;
            userAnswers = Array(questions.length).fill(null);
            totalScore = 0;
            
            // 回到首页
            paymentPage.classList.remove('active');
            landingPage.classList.add('active');
            
            // 重置第一题
            updateQuestion();
        }
    </script>
</body>
</html>